!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-image-zoom",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ngx-image-zoom"]={},e.ng.core,e.ng.common)}(this,(function(e,t,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,o,i){var n,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&Object.defineProperty(t,o,a),a}var n=function(){function e(e){this.renderer=e,this.zoomScroll=new t.EventEmitter,this.zoomPosition=new t.EventEmitter,this.enableLens=!1,this.lensBorderRadius=0,this.lensWidth=100,this.lensHeight=100,this.zoomMode="hover",this.magnification=1,this.enableScrollZoom=!1,this.scrollStepSize=.1,this.circularLens=!1,this.maxZoomRatio=2,this.zoomingEnabled=!1,this.zoomFrozen=!1,this.isReady=!1,this.thumbImageLoaded=!1,this.fullImageLoaded=!1,this.eventListeners=[]}var o;return o=e,Object.defineProperty(e.prototype,"setThumbImage",{set:function(e){this.thumbImageLoaded=!1,this.isReady=!1,this.thumbImage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setFullImage",{set:function(e){this.fullImageLoaded=!1,this.isReady=!1,this.fullImage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setZoomMode",{set:function(e){o.validZoomModes.some((function(t){return t===e}))&&(this.zoomMode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMagnification",{set:function(e){this.magnification=Number(e)||this.magnification,this.zoomScroll.emit(this.magnification)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMinZoomRatio",{set:function(e){var t=Number(e)||this.minZoomRatio||this.baseRatio||0;this.minZoomRatio=Math.max(t,this.baseRatio||0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMaxZoomRatio",{set:function(e){this.maxZoomRatio=Number(e)||this.maxZoomRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setScrollStepSize",{set:function(e){this.scrollStepSize=Number(e)||this.scrollStepSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setEnableLens",{set:function(e){this.enableLens=Boolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setLensWidth",{set:function(e){this.lensWidth=Number(e)||this.lensWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setLensHeight",{set:function(e){this.lensHeight=Number(e)||this.lensHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setCircularLens",{set:function(e){this.circularLens=Boolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setEnableScrollZoom",{set:function(e){this.enableScrollZoom=Boolean(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.setUpEventListeners()},e.prototype.ngOnChanges=function(){this.enableLens&&(this.circularLens?this.lensBorderRadius=this.lensWidth/2:this.lensBorderRadius=0),this.calculateRatioAndOffset(),this.calculateImageAndLensPosition()},e.prototype.ngOnDestroy=function(){this.eventListeners.forEach((function(e){return e()}))},e.prototype.onThumbImageLoaded=function(){this.thumbImageLoaded=!0,this.checkImagesLoaded()},e.prototype.onFullImageLoaded=function(){this.fullImageLoaded=!0,this.checkImagesLoaded()},e.prototype.setUpEventListeners=function(){var e=this;"hover"===this.zoomMode?(this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mouseenter",(function(t){return e.hoverMouseEnter(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mouseleave",(function(){return e.hoverMouseLeave()}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mousemove",(function(t){return e.hoverMouseMove(t)})))):"toggle"===this.zoomMode?this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"click",(function(t){return e.toggleClick(t)}))):"click"===this.zoomMode?(this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"click",(function(t){return e.clickStarter(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mouseleave",(function(){return e.clickMouseLeave()}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mousemove",(function(t){return e.clickMouseMove(t)})))):"hover-freeze"===this.zoomMode&&(this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mouseenter",(function(t){return e.hoverFreezeMouseEnter(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mouseleave",(function(){return e.hoverFreezeMouseLeave()}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mousemove",(function(t){return e.hoverFreezeMouseMove(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"click",(function(t){return e.hoverFreezeClick(t)})))),this.enableScrollZoom&&(this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"mousewheel",(function(t){return e.onMouseWheel(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"DOMMouseScroll",(function(t){return e.onMouseWheel(t)}))),this.eventListeners.push(this.renderer.listen(this.zoomContainer.nativeElement,"onmousewheel",(function(t){return e.onMouseWheel(t)})))),this.enableLens&&this.circularLens&&(this.lensBorderRadius=this.lensWidth/2)},e.prototype.checkImagesLoaded=function(){this.calculateRatioAndOffset(),this.thumbImageLoaded&&this.fullImageLoaded&&(this.calculateImageAndLensPosition(),this.isReady=!0)},e.prototype.setZoomPosition=function(e,t){this.latestMouseLeft=Number(e)||this.latestMouseLeft,this.latestMouseTop=Number(t)||this.latestMouseTop;var o={x:this.latestMouseLeft,y:this.latestMouseTop};this.zoomPosition.emit(o)},e.prototype.onMouseWheel=function(e){if(this.zoomingEnabled&&!this.zoomFrozen){e=window.event||e;var t=Math.max(Math.min(e.wheelDelta||-e.detail,1),-1);this.setMagnification=t>0?Math.min(this.magnification+this.scrollStepSize,this.maxZoomRatio):Math.max(this.magnification-this.scrollStepSize,this.minZoomRatio),this.calculateRatio(),this.calculateZoomPosition(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}},e.prototype.hoverMouseEnter=function(e){this.zoomOn(e)},e.prototype.hoverMouseLeave=function(){this.zoomOff()},e.prototype.hoverMouseMove=function(e){this.calculateZoomPosition(e)},e.prototype.toggleClick=function(e){this.zoomingEnabled?this.zoomOff():this.zoomOn(e)},e.prototype.clickStarter=function(e){!1===this.zoomingEnabled&&this.zoomOn(e)},e.prototype.clickMouseLeave=function(){this.zoomOff()},e.prototype.clickMouseMove=function(e){this.zoomingEnabled&&this.calculateZoomPosition(e)},e.prototype.hoverFreezeMouseEnter=function(e){this.zoomingEnabled&&!this.zoomFrozen&&this.zoomOn(e)},e.prototype.hoverFreezeMouseLeave=function(){this.zoomingEnabled&&!this.zoomFrozen&&this.zoomOff()},e.prototype.hoverFreezeMouseMove=function(e){this.zoomingEnabled&&!this.zoomFrozen&&this.calculateZoomPosition(e)},e.prototype.hoverFreezeClick=function(e){this.zoomingEnabled&&this.zoomFrozen?(this.zoomFrozen=!1,this.zoomOff()):this.zoomingEnabled?this.zoomFrozen=!0:this.zoomOn(e)},e.prototype.zoomOn=function(e){this.isReady&&(this.zoomingEnabled=!0,this.calculateRatioAndOffset(),this.display="block",this.calculateZoomPosition(e))},e.prototype.zoomOff=function(){this.zoomingEnabled=!1,this.display="none"},e.prototype.calculateZoomPosition=function(e){var t=Math.max(Math.min(e.offsetX,this.thumbWidth),0),o=Math.max(Math.min(e.offsetY,this.thumbHeight),0);this.setZoomPosition(t,o),this.calculateImageAndLensPosition()},e.prototype.calculateImageAndLensPosition=function(){var e=0,t=0;this.enableLens&&(e=this.lensLeft=this.latestMouseLeft-this.lensWidth/2,t=this.lensTop=this.latestMouseTop-this.lensHeight/2),this.fullImageLeft=this.latestMouseLeft*-this.xRatio-e,this.fullImageTop=this.latestMouseTop*-this.yRatio-t},e.prototype.calculateRatioAndOffset=function(){this.thumbWidth=this.imageThumbnail.nativeElement.width,this.thumbHeight=this.imageThumbnail.nativeElement.height,this.enableLens||(this.lensWidth=this.thumbWidth,this.lensHeight=this.thumbHeight,this.lensLeft=0,this.lensTop=0),this.offsetTop=this.imageThumbnail.nativeElement.getBoundingClientRect().top,this.offsetLeft=this.imageThumbnail.nativeElement.getBoundingClientRect().left,void 0===this.fullImage&&(this.fullImage=this.thumbImage),this.fullImageLoaded&&(this.fullWidth=this.fullSizeImage.nativeElement.naturalWidth,this.fullHeight=this.fullSizeImage.nativeElement.naturalHeight,this.baseRatio=Math.max(this.thumbWidth/this.fullWidth,this.thumbHeight/this.fullHeight),this.minZoomRatio=Math.max(this.minZoomRatio||0,this.baseRatio||0),this.calculateRatio())},e.prototype.calculateRatio=function(){this.magnifiedWidth=this.fullWidth*this.magnification,this.magnifiedHeight=this.fullHeight*this.magnification,this.xRatio=(this.magnifiedWidth-this.thumbWidth)/this.thumbWidth,this.yRatio=(this.magnifiedHeight-this.thumbHeight)/this.thumbHeight},e.validZoomModes=["hover","toggle","click","hover-freeze"],e.ctorParameters=function(){return[{type:t.Renderer2}]},i([t.ViewChild("zoomContainer",{static:!0})],e.prototype,"zoomContainer",void 0),i([t.ViewChild("imageThumbnail",{static:!0})],e.prototype,"imageThumbnail",void 0),i([t.ViewChild("fullSizeImage",{static:!0})],e.prototype,"fullSizeImage",void 0),i([t.Output()],e.prototype,"zoomScroll",void 0),i([t.Output()],e.prototype,"zoomPosition",void 0),i([t.Input("thumbImage")],e.prototype,"setThumbImage",null),i([t.Input("fullImage")],e.prototype,"setFullImage",null),i([t.Input("zoomMode")],e.prototype,"setZoomMode",null),i([t.Input("magnification")],e.prototype,"setMagnification",null),i([t.Input("minZoomRatio")],e.prototype,"setMinZoomRatio",null),i([t.Input("maxZoomRatio")],e.prototype,"setMaxZoomRatio",null),i([t.Input("scrollStepSize")],e.prototype,"setScrollStepSize",null),i([t.Input("enableLens")],e.prototype,"setEnableLens",null),i([t.Input("lensWidth")],e.prototype,"setLensWidth",null),i([t.Input("lensHeight")],e.prototype,"setLensHeight",null),i([t.Input("circularLens")],e.prototype,"setCircularLens",null),i([t.Input("enableScrollZoom")],e.prototype,"setEnableScrollZoom",null),e=o=i([t.Component({selector:"lib-ngx-image-zoom",template:'<div #zoomContainer class="ngxImageZoomContainer"\n     [style.width.px]="this.thumbWidth" [style.height.px]="this.thumbHeight">\n\n  <img #imageThumbnail class="ngxImageZoomThumbnail" [src]="thumbImage" (load)="onThumbImageLoaded()"/>\n\n  <div [ngClass]="{\'ngxImageZoomFullContainer\': true, \'ngxImageZoomLensEnabled\': this.enableLens}"\n       [style.display]="this.display"\n       [style.top.px]="this.lensTop"\n       [style.left.px]="this.lensLeft"\n       [style.width.px]="this.lensWidth"\n       [style.height.px]="this.lensHeight"\n       [style.border-radius.px]="this.lensBorderRadius"\n  >\n    <img #fullSizeImage class="ngxImageZoomFull" [src]="fullImage"\n         (load)="onFullImageLoaded()"\n         [style.display]="this.display"\n         [style.top.px]="this.fullImageTop"\n         [style.left.px]="this.fullImageLeft"\n         [style.width.px]="this.magnifiedWidth"\n         [style.height.px]="this.magnifiedHeight"\n    />\n  </div>\n</div>\n',styles:[".ngxImageZoomContainer{position:relative;margin:auto;overflow:hidden;pointer-events:none}.ngxImageZoomThumbnail{pointer-events:all}.ngxImageZoomFull{position:absolute;max-width:none;max-height:none;display:none;pointer-events:none}.ngxImageZoomFullContainer{position:absolute;overflow:hidden;pointer-events:none}.ngxImageZoomFullContainer.ngxImageZoomLensEnabled{border:2px solid red;cursor:crosshair;pointer-events:none}"]})],e)}(),s=function(){function e(){}return e=i([t.NgModule({declarations:[n],imports:[o.CommonModule],exports:[n]})],e)}();e.NgxImageZoomComponent=n,e.NgxImageZoomModule=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-image-zoom.umd.min.js.map