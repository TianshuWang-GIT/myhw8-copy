{"version":3,"file":"ngx-image-zoom.js","sources":["ng://ngx-image-zoom/lib/ngx-image-zoom.component.ts","ng://ngx-image-zoom/lib/ngx-image-zoom.module.ts","ng://ngx-image-zoom/public-api.ts","ng://ngx-image-zoom/ngx-image-zoom.ts"],"sourcesContent":["import { Component, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, Renderer2, ViewChild } from '@angular/core';\n\nexport interface Coord {\n    x: number;\n    y: number;\n}\n\n@Component({\n    selector: 'lib-ngx-image-zoom',\n    templateUrl: './ngx-image-zoom.component.html',\n    styleUrls: ['./ngx-image-zoom.component.css']\n})\nexport class NgxImageZoomComponent implements OnInit, OnChanges, OnDestroy {\n\n    private static readonly validZoomModes: string[] = ['hover', 'toggle', 'click', 'hover-freeze'];\n\n    @ViewChild('zoomContainer', {static: true}) zoomContainer !: ElementRef;\n    @ViewChild('imageThumbnail', {static: true}) imageThumbnail !: ElementRef;\n    @ViewChild('fullSizeImage', {static: true}) fullSizeImage !: ElementRef;\n\n    @Output() zoomScroll = new EventEmitter<number>();\n    @Output() zoomPosition = new EventEmitter<Coord>();\n\n    public display: string;\n    public fullImageTop: number;\n    public fullImageLeft: number;\n    public magnifiedWidth: number;\n    public magnifiedHeight: number;\n    public lensTop: number;\n    public lensLeft: number;\n    public enableLens = false;\n    public lensBorderRadius = 0;\n\n    public thumbImage: string;\n    public fullImage: string;\n    public thumbWidth: number;\n    public thumbHeight: number;\n    public fullWidth: number;\n    public fullHeight: number;\n    public lensWidth = 100;\n    public lensHeight = 100;\n\n    private zoomMode = 'hover';\n    private magnification = 1;\n    private enableScrollZoom = false;\n    private scrollStepSize = 0.1;\n    private circularLens = false;\n\n    private baseRatio: number;\n    private minZoomRatio;\n    private maxZoomRatio = 2;\n    private xRatio: number;\n    private yRatio: number;\n    private offsetLeft: number;\n    private offsetTop: number;\n    private zoomingEnabled = false;\n    private zoomFrozen = false;\n    private isReady = false;\n    private thumbImageLoaded = false;\n    private fullImageLoaded = false;\n\n    private latestMouseLeft: number;\n    private latestMouseTop: number;\n\n    private eventListeners: (() => void)[] = [];\n\n    constructor(private renderer: Renderer2) {\n    }\n\n    @Input('thumbImage')\n    public set setThumbImage(thumbImage: string) {\n        this.thumbImageLoaded = false;\n        this.isReady = false;\n        this.thumbImage = thumbImage;\n    }\n\n    @Input('fullImage')\n    public set setFullImage(fullImage: string) {\n        this.fullImageLoaded = false;\n        this.isReady = false;\n        this.fullImage = fullImage;\n    }\n\n    @Input('zoomMode')\n    public set setZoomMode(zoomMode: string) {\n        if (NgxImageZoomComponent.validZoomModes.some(m => m === zoomMode)) {\n            this.zoomMode = zoomMode;\n        }\n    }\n\n    @Input('magnification')\n    public set setMagnification(magnification: number) {\n        this.magnification = Number(magnification) || this.magnification;\n        this.zoomScroll.emit(this.magnification);\n    }\n\n    @Input('minZoomRatio')\n    public set setMinZoomRatio(minZoomRatio: number) {\n        const ratio = Number(minZoomRatio) || this.minZoomRatio || this.baseRatio || 0;\n        this.minZoomRatio = Math.max(ratio, this.baseRatio || 0);\n    }\n\n    @Input('maxZoomRatio')\n    public set setMaxZoomRatio(maxZoomRatio: number) {\n        this.maxZoomRatio = Number(maxZoomRatio) || this.maxZoomRatio;\n    }\n\n    @Input('scrollStepSize')\n    public set setScrollStepSize(stepSize: number) {\n        this.scrollStepSize = Number(stepSize) || this.scrollStepSize;\n    }\n\n    @Input('enableLens')\n    public set setEnableLens(enable: boolean) {\n        this.enableLens = Boolean(enable);\n    }\n\n    @Input('lensWidth')\n    public set setLensWidth(width: number) {\n        this.lensWidth = Number(width) || this.lensWidth;\n    }\n\n    @Input('lensHeight')\n    public set setLensHeight(height: number) {\n        this.lensHeight = Number(height) || this.lensHeight;\n    }\n\n    @Input('circularLens')\n    public set setCircularLens(enable: boolean) {\n        this.circularLens = Boolean(enable);\n    }\n\n    @Input('enableScrollZoom')\n    public set setEnableScrollZoom(enable: boolean) {\n        this.enableScrollZoom = Boolean(enable);\n    }\n\n    ngOnInit(): void {\n        this.setUpEventListeners();\n    }\n\n    ngOnChanges() {\n        if (this.enableLens) {\n            if (this.circularLens) {\n                this.lensBorderRadius = this.lensWidth / 2;\n            } else {\n                this.lensBorderRadius = 0;\n            }\n        }\n        this.calculateRatioAndOffset();\n        this.calculateImageAndLensPosition();\n    }\n\n    ngOnDestroy(): void {\n        this.eventListeners.forEach((destroyFn) => destroyFn());\n    }\n\n    /**\n     * Template helper methods\n     */\n    onThumbImageLoaded() {\n        this.thumbImageLoaded = true;\n        this.checkImagesLoaded();\n    }\n\n    onFullImageLoaded() {\n        this.fullImageLoaded = true;\n        this.checkImagesLoaded();\n    }\n\n    private setUpEventListeners() {\n        if (this.zoomMode === 'hover') {\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mouseenter', (event) => this.hoverMouseEnter(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mouseleave', () => this.hoverMouseLeave())\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mousemove', (event) => this.hoverMouseMove(event))\n            );\n        } else if (this.zoomMode === 'toggle') {\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'click', (event) => this.toggleClick(event))\n            );\n        } else if (this.zoomMode === 'click') {\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'click', (event) => this.clickStarter(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mouseleave', () => this.clickMouseLeave())\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mousemove', (event) => this.clickMouseMove(event))\n            );\n        } else if (this.zoomMode === 'hover-freeze') {\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mouseenter', (event) => this.hoverFreezeMouseEnter(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mouseleave', () => this.hoverFreezeMouseLeave())\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mousemove', (event) => this.hoverFreezeMouseMove(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'click', (event) => this.hoverFreezeClick(event))\n            );\n        }\n        if (this.enableScrollZoom) {\n            // Chrome: 'mousewheel', Firefox: 'DOMMouseScroll', IE: 'onmousewheel'\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'mousewheel', (event) => this.onMouseWheel(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'DOMMouseScroll', (event) => this.onMouseWheel(event))\n            );\n            this.eventListeners.push(\n                this.renderer.listen(this.zoomContainer.nativeElement, 'onmousewheel', (event) => this.onMouseWheel(event))\n            );\n        }\n        if (this.enableLens && this.circularLens) {\n            this.lensBorderRadius = this.lensWidth / 2;\n        }\n    }\n\n    private checkImagesLoaded() {\n        this.calculateRatioAndOffset();\n        if (this.thumbImageLoaded && this.fullImageLoaded) {\n            this.calculateImageAndLensPosition();\n            this.isReady = true;\n        }\n    }\n\n    /**\n     * Zoom position setters\n     */\n    private setZoomPosition(left: number, top: number) {\n        this.latestMouseLeft = Number(left) || this.latestMouseLeft;\n        this.latestMouseTop = Number(top) || this.latestMouseTop;\n\n        const c: Coord = {\n            x: this.latestMouseLeft,\n            y: this.latestMouseTop\n        };\n        this.zoomPosition.emit(c);\n    }\n\n\n    /**\n     * Mouse wheel event\n     */\n    private onMouseWheel(event: any) {\n        // Don't eat events if zooming isn't active\n        if (!this.zoomingEnabled || this.zoomFrozen) {\n            return;\n        }\n\n        event = window.event || event; // old IE\n        const direction = Math.max(Math.min((event.wheelDelta || -event.detail), 1), -1);\n        if (direction > 0) {\n            // up\n            this.setMagnification = Math.min(this.magnification + this.scrollStepSize, this.maxZoomRatio);\n        } else {\n            // down\n            this.setMagnification = Math.max(this.magnification - this.scrollStepSize, this.minZoomRatio);\n        }\n        this.calculateRatio();\n        this.calculateZoomPosition(event);\n\n        // Prevent scrolling on page.\n        event.returnValue = false; // IE\n        if (event.preventDefault) {\n            event.preventDefault(); // Chrome & FF\n        }\n    }\n\n    /**\n     * Hover mode\n     */\n    private hoverMouseEnter(event: MouseEvent) {\n        this.zoomOn(event);\n    }\n\n    private hoverMouseLeave() {\n        this.zoomOff();\n    }\n\n    private hoverMouseMove(event: MouseEvent) {\n        this.calculateZoomPosition(event);\n    }\n\n    /**\n     * Toggle mode\n     */\n    private toggleClick(event: MouseEvent) {\n        if (this.zoomingEnabled) {\n            this.zoomOff();\n        } else {\n            this.zoomOn(event);\n        }\n    }\n\n    /**\n     * Click mode\n     */\n    private clickStarter(event: MouseEvent) {\n        if (this.zoomingEnabled === false) {\n            this.zoomOn(event);\n        }\n    }\n\n    private clickMouseLeave() {\n        this.zoomOff();\n    }\n\n    private clickMouseMove(event: MouseEvent) {\n        if (this.zoomingEnabled) {\n            this.calculateZoomPosition(event);\n        }\n    }\n\n    /**\n     * Hover freeze mode\n     */\n    private hoverFreezeMouseEnter(event: MouseEvent) {\n        if (this.zoomingEnabled && !this.zoomFrozen) {\n            this.zoomOn(event);\n        }\n    }\n\n    private hoverFreezeMouseLeave() {\n        if (this.zoomingEnabled && !this.zoomFrozen) {\n            this.zoomOff();\n        }\n    }\n\n    private hoverFreezeMouseMove(event: MouseEvent) {\n        if (this.zoomingEnabled && !this.zoomFrozen) {\n            this.calculateZoomPosition(event);\n        }\n    }\n\n    private hoverFreezeClick(event: MouseEvent) {\n        if (this.zoomingEnabled && this.zoomFrozen) {\n            this.zoomFrozen = false;\n            this.zoomOff();\n        } else if (this.zoomingEnabled) {\n            this.zoomFrozen = true;\n        } else {\n            this.zoomOn(event);\n        }\n    }\n\n    /**\n     * Private helper methods\n     */\n    private zoomOn(event: MouseEvent) {\n        if (this.isReady) {\n            this.zoomingEnabled = true;\n            this.calculateRatioAndOffset();\n            this.display = 'block';\n            this.calculateZoomPosition(event);\n        }\n    }\n\n    private zoomOff() {\n        this.zoomingEnabled = false;\n        this.display = 'none';\n    }\n\n    private calculateZoomPosition(event: MouseEvent) {\n        const newLeft = Math.max(Math.min(event.offsetX, this.thumbWidth), 0);\n        const newTop = Math.max(Math.min(event.offsetY, this.thumbHeight), 0);\n\n        this.setZoomPosition(newLeft, newTop);\n\n        this.calculateImageAndLensPosition();\n    }\n\n    private calculateImageAndLensPosition() {\n        let lensLeftMod = 0;\n        let lensTopMod = 0;\n\n        if (this.enableLens) {\n            lensLeftMod = this.lensLeft = this.latestMouseLeft - this.lensWidth / 2;\n            lensTopMod = this.lensTop = this.latestMouseTop - this.lensHeight / 2;\n        }\n\n        this.fullImageLeft = (this.latestMouseLeft * -this.xRatio) - lensLeftMod;\n        this.fullImageTop = (this.latestMouseTop * -this.yRatio) - lensTopMod;\n    }\n\n    private calculateRatioAndOffset() {\n        this.thumbWidth = this.imageThumbnail.nativeElement.width;\n        this.thumbHeight = this.imageThumbnail.nativeElement.height;\n\n        // If lens is disabled, set lens size to equal thumb size and position it on top of the thumb\n        if (!this.enableLens) {\n            this.lensWidth = this.thumbWidth;\n            this.lensHeight = this.thumbHeight;\n            this.lensLeft = 0;\n            this.lensTop = 0;\n        }\n\n        // getBoundingClientRect() ? https://stackoverflow.com/a/44008873\n        this.offsetTop = this.imageThumbnail.nativeElement.getBoundingClientRect().top;\n        this.offsetLeft = this.imageThumbnail.nativeElement.getBoundingClientRect().left;\n\n        if (this.fullImage === undefined) {\n            this.fullImage = this.thumbImage;\n        }\n\n        if (this.fullImageLoaded) {\n            this.fullWidth = this.fullSizeImage.nativeElement.naturalWidth;\n            this.fullHeight = this.fullSizeImage.nativeElement.naturalHeight;\n\n            this.baseRatio = Math.max(\n                (this.thumbWidth / this.fullWidth),\n                (this.thumbHeight / this.fullHeight));\n\n            // Don't allow zooming to smaller than thumbnail size\n            this.minZoomRatio = Math.max(this.minZoomRatio || 0, this.baseRatio || 0);\n\n            this.calculateRatio();\n        }\n    }\n\n    private calculateRatio() {\n        this.magnifiedWidth = (this.fullWidth * this.magnification);\n        this.magnifiedHeight = (this.fullHeight * this.magnification);\n\n        this.xRatio = (this.magnifiedWidth - this.thumbWidth) / this.thumbWidth;\n        this.yRatio = (this.magnifiedHeight - this.thumbHeight) / this.thumbHeight;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { NgxImageZoomComponent } from './ngx-image-zoom.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n    declarations: [\n        NgxImageZoomComponent,\n    ],\n    imports: [\n        CommonModule,\n    ],\n    exports: [\n        NgxImageZoomComponent\n    ]\n})\nexport class NgxImageZoomModule {\n}\n","/*\n * Public API Surface of ngx-image-zoom\n */\n\nexport * from './lib/ngx-image-zoom.component';\nexport * from './lib/ngx-image-zoom.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}